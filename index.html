<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>iOS Style Calculator</title>

<style>
    body {
        background: black;
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
        margin: 0;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
    }

    /* 顯示區 */
    #display {
        font-size: 4.8rem;
        text-align: right;
        padding: 30px 24px;
        flex: 1;
        display: flex;
        align-items: flex-end;
        justify-content: flex-end;
    }

    /* 整個按鈕區 */
    #buttons {
        padding: 0 10px 25px 10px;
        display: grid;
        gap: var(--gap);
        grid-template-columns: repeat(4, 1fr);
    }

    /* iOS 按鈕風格 */
    .btn {
        border-radius: 50%;
        border: none;
        font-size: var(--font);
        height: var(--size);
        width: var(--size);
        display: flex;
        align-items: center;
        justify-content: center;
        background: #333;
        color: white;
        transition: transform 0.08s;
        -webkit-tap-highlight-color: transparent;
        user-select: none;
    }

    /* iOS 按壓動畫 */
    .btn:active {
        transform: scale(0.92);
    }

    /* iOS 橘色按鈕 */
    .op {
        background: #ff9f0a;
    }

    /* iOS 淺灰功能鍵 */
    .func {
        background: #a5a5a5;
        color: black;
    }

    /* 自動偵測螢幕尺寸：iPhone / Plus / iPad */
    :root {
        --size: 72px;    /* default iPhone */
        --gap: 12px;
        --font: 2rem;
    }

    @media (min-width: 400px) {
        :root {
            --size: 82px; /* iPhone Plus */
            --gap: 14px;
            --font: 2.2rem;
        }
    }

    @media (min-width: 700px) {
        :root {
            --size: 110px; /* iPad */
            --gap: 18px;
            --font: 3rem;
        }
    }
</style>
</head>

<body>

<div id="display">0</div>

<div id="buttons">
    <button class="btn func" data-key="del">⌫</button>
    <button class="btn func" data-key="ac">AC</button>
    <button class="btn func" data-key="%">%</button>
    <button class="btn op"   data-key="÷">÷</button>

    <button class="btn" data-key="7">7</button>
    <button class="btn" data-key="8">8</button>
    <button class="btn" data-key="9">9</button>
    <button class="btn op" data-key="×">×</button>

    <button class="btn" data-key="4">4</button>
    <button class="btn" data-key="5">5</button>
    <button class="btn" data-key="6">6</button>
    <button class="btn op" data-key="−">−</button>

    <button class="btn" data-key="1">1</button>
    <button class="btn" data-key="2">2</button>
    <button class="btn" data-key="3">3</button>
    <button class="btn op" data-key="+">+</button>

    <button class="btn func" data-key="+/-">+/-</button>
    <button class="btn" data-key="0">0</button>
    <button class="btn" data-key=".">.</button>
    <button class="btn op" data-key="=">=</button>
</div>

<script>
const display = document.getElementById("display");
let buffer = "0";
let operator = null;
let previous = null;

function updateDisplay() {
    display.textContent = buffer;
}

document.querySelectorAll(".btn").forEach(btn => {
    btn.addEventListener("click", () => {
        const key = btn.dataset.key;

        if (!isNaN(key)) {                    // 數字
            buffer = buffer === "0" ? key : buffer + key;
        } else if (key === ".") {
            if (!buffer.includes(".")) buffer += ".";
        } else if (key === "ac") {
            buffer = "0";
            operator = null;
            previous = null;
        } else if (key === "del") {
            buffer = buffer.length > 1 ? buffer.slice(0, -1) : "0";
        } else if (["+", "−", "×", "÷"].includes(key)) {
            operator = key;
            previous = buffer;
            buffer = "0";
        } else if (key === "=") {
            if (operator && previous !== null) {
                const a = parseFloat(previous);
                const b = parseFloat(buffer);

                switch (operator) {
                    case "+": buffer = (a + b).toString(); break;
                    case "−": buffer = (a - b).toString(); break;
                    case "×": buffer = (a * b).toString(); break;
                    case "÷": buffer = b === 0 ? "Error" : (a / b).toString();
                }
                operator = null;
                previous = null;
            }
        } else if (key === "%") {
            buffer = (parseFloat(buffer) / 100).toString();
        } else if (key === "+/-") {
            buffer = (parseFloat(buffer) * -1).toString();
        }

        updateDisplay();
    });
});
</script>

</body>
</html>